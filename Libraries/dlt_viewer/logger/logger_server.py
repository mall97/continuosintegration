#!/usr/bin/env python3
####################################################################################################################
###-                            {Logger Remote Server}                                                         ##-#
###-Connect Robot framework with remote Logger                                                                 ##-#
###-Authors:  Raquel Ribeiro                                                                                   ##-#
####################################################################################################################

####################################################################################################################
# -----------------------------------------------------------------------------
# imports
# -----------------------------------------------------------------------------
####################################################################################################################
from robotremoteserver import RobotRemoteServer
from logger_api        import Api
####################################################################################################################
####################################################################################################################
# -----------------------------------------------------------------------------
# main
# -----------------------------------------------------------------------------
####################################################################################################################
def main(params):   
    try:
        # -----------------------------------------------------------------------------
        # Start server
        # -----------------------------------------------------------------------------
        api = Api(params)
        RobotRemoteServer(api, host=str(params['ip']), port=int(params['port']))
    except Exception as e:
        print(str(e))
####################################################################################################################
# -----------------------------------------------------------------------------
# run
# -----------------------------------------------------------------------------
####################################################################################################################  
from argparse import ArgumentParser
#
if __name__ == '__main__':
    parser = ArgumentParser()
    parser.add_argument('--ip'  ,         type=str,   default='127.0.0.1',                                                                         help='Logger Server Host'      )
    parser.add_argument('--port',         type=int,   default=21000,                                                                               help='Logger Server Port'      )
    parser.add_argument('--logger',       type=str,   default="./libraries/altran/logger/configuration.json",                                             help='Logger configuration'    )

    args = parser.parse_args()
    # main 
    main(vars(args))
####################################################################################################################
# -----------------------------------------------------------------------------
# end
# -----------------------------------------------------------------------------
####################################################################################################################  